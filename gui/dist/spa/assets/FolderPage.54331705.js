import{u as Y,a as j,b as K,c as Z}from"./QTabs.555f3ce0.js";import{c as D,h as M,e as G}from"./render.1876b975.js";import{Q as H}from"./QSeparator.b4f6ebb5.js";import{u as J,a as ee,b as te,c as ae}from"./use-prevent-scroll.c16e9a09.js";import{h as T,c as _,g as U,i as oe,k as O,l as le,d as C,W,r as y,x as m,y as d,z as o,I as V,f as t,X as q,Y as I,o as re,v as X,V as ne,Z as S,F,$ as L,a0 as z,a1 as se,A as Q}from"./index.fa243cfe.js";import{u as ue,a as ie}from"./use-dark.0fe0a51e.js";import{R as B,Q as N}from"./QBtn.ac63d3fa.js";import{Q as ce,T as pe}from"./QDrawer.6f647749.js";import{Q as fe}from"./QPage.8933b9c3.js";import{Q as P}from"./QIcon.8522603b.js";import{Q as k,a as b,b as $}from"./QItem.7f8c61c7.js";import{Q as E}from"./QList.98872126.js";import{g as me}from"./requests.9c957d79.js";import{u as de,a as ve}from"./folderStore.daca5a2f.js";import"./scroll.fd05463a.js";var A=D({name:"QTab",props:Y,emits:j,setup(r,{slots:s,emit:a}){const{renderTab:u}=K(r,s,a);return()=>u("div")}}),R=D({name:"QTabPanel",props:J,setup(r,{slots:s}){return()=>T("div",{class:"q-tab-panel",role:"tabpanel"},M(s.default))}}),ge=D({name:"QTabPanels",props:{...ee,...ue},emits:te,setup(r,{slots:s}){const a=U(),u=ie(r,a.proxy.$q),{updatePanelsList:c,getPanelContent:e,panelDirectives:n}=ae(),v=_(()=>"q-tab-panels q-panel-parent"+(u.value===!0?" q-tab-panels--dark q-dark":""));return()=>(c(s),G("div",{class:v.value},e(),"pan",r.swipeable,()=>n.value))}});const _e={position:{type:String,default:"bottom-right",validator:r=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(r)},offset:{type:Array,validator:r=>r.length===2},expand:Boolean};function be(){const{props:r,proxy:{$q:s}}=U(),a=oe(le,O);if(a===O)return console.error("QPageSticky needs to be child of QLayout"),O;const u=_(()=>{const i=r.position;return{top:i.indexOf("top")>-1,right:i.indexOf("right")>-1,bottom:i.indexOf("bottom")>-1,left:i.indexOf("left")>-1,vertical:i==="top"||i==="bottom",horizontal:i==="left"||i==="right"}}),c=_(()=>a.header.offset),e=_(()=>a.right.offset),n=_(()=>a.footer.offset),v=_(()=>a.left.offset),x=_(()=>{let i=0,f=0;const g=u.value,w=s.lang.rtl===!0?-1:1;g.top===!0&&c.value!==0?f=`${c.value}px`:g.bottom===!0&&n.value!==0&&(f=`${-n.value}px`),g.left===!0&&v.value!==0?i=`${w*v.value}px`:g.right===!0&&e.value!==0&&(i=`${-w*e.value}px`);const h={transform:`translate(${i}, ${f})`};return r.offset&&(h.margin=`${r.offset[1]}px ${r.offset[0]}px`),g.vertical===!0?(v.value!==0&&(h[s.lang.rtl===!0?"right":"left"]=`${v.value}px`),e.value!==0&&(h[s.lang.rtl===!0?"left":"right"]=`${e.value}px`)):g.horizontal===!0&&(c.value!==0&&(h.top=`${c.value}px`),n.value!==0&&(h.bottom=`${n.value}px`)),h}),l=_(()=>`q-page-sticky row flex-center fixed-${r.position} q-page-sticky--${r.expand===!0?"expand":"shrink"}`);function p(i){const f=M(i.default);return T("div",{class:l.value,style:x.value},r.expand===!0?f:[T("div",f)])}return{$layout:a,getStickyContent:p}}var ye=D({name:"QPageSticky",props:_e,setup(r,{slots:s}){const{getStickyContent:a}=be();return()=>a(s)}});const he=C({__name:"ArticleItem",props:{id:{type:Number,required:!0},title:{type:String,required:!0}},setup(r){const s=W(),a=r,u=y(a.title),c=y(a.id),e=()=>{s.push(`/folder/article/${c.value}`)};return(n,v)=>(m(),d(E,null,{default:o(()=>[V((m(),d(k,{clickable:"",exact:"",dense:"",onClick:e,class:"q-pa-none"},{default:o(()=>[t(b,{avatar:"",class:"q-pa-none min-w-[32px]"},{default:o(()=>[t(P,{name:"article",size:"sm"})]),_:1}),t(b,null,{default:o(()=>[t($,null,{default:o(()=>[q(I(u.value),1)]),_:1})]),_:1})]),_:1})),[[B]])]),_:1}))}}),ke={class:"row items-center"},xe=C({__name:"FolderList",props:{id:{type:Number,required:!0}},setup(r){const s=W(),a=r,u=y({});re(async()=>{u.value=await me(a.id)});const c=y("keyboard_arrow_right"),e=y(!1);function n(){e.value=!e.value,s.push(`/folder/detail/${u.value.id}`),e.value?c.value="keyboard_arrow_down":c.value="keyboard_arrow_right"}return(v,x)=>{const l=X("FolderList",!0);return m(),d(E,null,{default:o(()=>[V((m(),d(k,{clickable:"",exact:"",dense:"",onClick:n,class:"q-pa-none"},{default:o(()=>[t(b,{avatar:"",class:"q-pa-none"},{default:o(()=>[ne("div",ke,[t(P,{name:c.value,size:"sm"},null,8,["name"]),t(P,{name:"folder",size:"sm"})])]),_:1}),t(b,null,{default:o(()=>[t($,null,{default:o(()=>[q(I(u.value.name),1)]),_:1})]),_:1})]),_:1})),[[B]]),e.value&&u.value.articles.length>0?(m(),d(k,{key:0,class:"q-pa-none q-pl-lg",dense:""},{default:o(()=>[t(b,null,{default:o(()=>[(m(!0),S(F,null,L(u.value.articles,p=>(m(),d(he,{id:p.id,key:p.id,title:p.title},null,8,["id","title"]))),128))]),_:1})]),_:1})):z("",!0),e.value&&u.value.folders.length>0?(m(),d(k,{key:1,class:"q-pa-none q-pl-lg",dense:""},{default:o(()=>[t(b,null,{default:o(()=>[(m(!0),S(F,null,L(u.value.folders,p=>(m(),d(l,{id:p.id,key:p.id},null,8,["id"]))),128))]),_:1})]),_:1})):z("",!0)]),_:1})}}}),we=C({__name:"MdCatalog",props:{catalog:{type:Array,required:!0}},setup(r){const s=r;async function a(u){document.body.classList.remove("q-body--prevent-scroll"),document.body.classList.remove("q-body--force-scrollbar-y");const c=document.getElementById(u.text);c&&c.scrollIntoView({behavior:"smooth"})}return(u,c)=>(m(),d(E,{class:"q-pa-none"},{default:o(()=>[(m(!0),S(F,null,L(s.catalog,e=>V((m(),d(k,{key:e.text,clickable:"","active-class":"bg-primary text-white",onClick:n=>a(e)},{default:o(()=>[t(b,null,{default:o(()=>[t($,{class:se({"pl-0":e.level===1,"pl-4":e.level===2,"pl-8":e.level===3,"pl-12":e.level===4,"pl-16":e.level===5,"pl-20":e.level===6})},{default:o(()=>[q(I(e.text),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["onClick"])),[[B]])),128)),s.catalog.length===0?(m(),d(k,{key:0,class:"text-center"},{default:o(()=>[t(P,{name:"hourglass_empty",size:"16px"}),t($,null,{default:o(()=>[q("\u6682\u65E0\u5927\u7EB2")]),_:1})]),_:1})):z("",!0)]),_:1}))}}),Ee=C({__name:"FolderPage",setup(r){const s=de(),a=y(0),u=async l=>{var p,i,f,g;if(l.isFinal&&l.direction==="right"&&((p=l==null?void 0:l.position)==null?void 0:p.left)&&l.position.left<200){a.value=200,n.isDrawerOpen=!0;return}if(n.isDrawerOpen=!1,l.isFinal&&(l.direction==="left"||l.direction==="right"&&((i=l==null?void 0:l.position)==null?void 0:i.left)&&l.position.left<200)){await new Promise(w=>{setTimeout(()=>{w("")},200)}),a.value=0,n.isDrawerOpen=!1;return}if(s.platform.is.desktop&&((f=l==null?void 0:l.position)==null?void 0:f.left)&&l.position.left>=200&&l.position.left<=window.innerWidth/3){n.isDrawerOpen=!0,a.value=(g=l==null?void 0:l.position)==null?void 0:g.left;return}};function c(){n.isDrawerOpen=!n.isDrawerOpen,a.value=n.isDrawerOpen?200:0}const e=y({label:"\u6587\u4EF6",name:"file"}),n=ve(),v=()=>{s.platform.is.mobile&&(n.isDrawerOpen=!0,a.value=200)},x=async()=>{n.isDrawerOpen=!1,a.value=0};return(l,p)=>{const i=X("router-view");return m(),d(fe,null,{default:o(()=>[t(ce,{class:"bg-blue-grey-2",width:a.value,modelValue:Q(n).isDrawerOpen,"onUpdate:modelValue":p[2]||(p[2]=f=>Q(n).isDrawerOpen=f),persistent:""},{default:o(()=>[t(Z,{modelValue:e.value.name,"onUpdate:modelValue":p[0]||(p[0]=f=>e.value.name=f),class:"bg-blue-grey-2","active-color":"primary","indicator-color":"primary",align:"left","vertical-panes":""},{default:o(()=>[t(A,{name:"file",icon:"folder",label:"\u6587\u4EF6"}),t(A,{name:"catalog",icon:"list",label:"\u5927\u7EB2"})]),_:1},8,["modelValue"]),t(H),t(ge,{modelValue:e.value.name,"onUpdate:modelValue":p[1]||(p[1]=f=>e.value.name=f),class:"bg-blue-grey-2","keep-alive":""},{default:o(()=>[t(R,{name:"file"},{default:o(()=>[t(xe,{id:0})]),_:1}),t(R,{name:"catalog"},{default:o(()=>[t(we,{catalog:Q(n).catalog},null,8,["catalog"])]),_:1})]),_:1},8,["modelValue"]),t(N,{dense:"",round:"",color:"primary",icon:Q(n).isDrawerOpen?"chevron_left":"chevron_right",class:"mobile-only w-16 h-16 absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2",onClick:x},null,8,["icon"])]),_:1},8,["width","modelValue"]),t(ye,{class:"z-top",position:"left",offset:[-16.8,0]},{default:o(()=>[V(t(N,{dense:"",round:"",color:"primary",icon:"menu",class:"desktop-only",onClick:c},null,512),[[pe,u,void 0,{horizontal:!0,prevent:!0,mouse:!0}]])]),_:1}),t(i,{onClick:v})]),_:1})}}});export{Ee as default};
