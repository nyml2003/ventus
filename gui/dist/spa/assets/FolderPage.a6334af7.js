import{u as K,a as Z,b as G,c as H}from"./QTabs.5b2b35c6.js";import{c as D,h as U,e as J}from"./render.c44680c3.js";import{u as ee,a as te,Q as ae}from"./folderStore.53da8e8f.js";import{u as le,a as oe,b as re,c as se}from"./use-prevent-scroll.a65ec42c.js";import{h as S,c as _,g as X,i as ne,k as z,l as ue,d as V,W as Y,r as v,x as i,y as f,z as a,I as Q,f as t,X as P,Y as F,o as ie,v as j,V as ce,Z as T,F as O,$ as L,a0 as q,a1 as pe,A as g}from"./index.46c1e340.js";import{u as de,a as fe}from"./use-dark.1d5c52f5.js";import{Q as me,T as N}from"./QDrawer.e76a245d.js";import{R as I,Q as A}from"./QBtn.dea77918.js";import{Q as ve}from"./QPage.9e0bfa57.js";import{Q as $}from"./QIcon.2816fa90.js";import{Q as x,a as y,b as C}from"./QItem.be53cf46.js";import{Q as E}from"./QList.5f52d5ab.js";import{g as ge}from"./requests.9c957d79.js";import"./scroll.21e37723.js";var M=D({name:"QTab",props:K,emits:Z,setup(l,{slots:o,emit:r}){const{renderTab:n}=G(l,o,r);return()=>n("div")}}),R=D({name:"QTabPanel",props:le,setup(l,{slots:o}){return()=>S("div",{class:"q-tab-panel",role:"tabpanel"},U(o.default))}}),_e=D({name:"QTabPanels",props:{...oe,...de},emits:re,setup(l,{slots:o}){const r=X(),n=fe(l,r.proxy.$q),{updatePanelsList:u,getPanelContent:e,panelDirectives:s}=se(),c=_(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(u(o),J("div",{class:c.value},e(),"pan",l.swipeable,()=>s.value))}});const ye={position:{type:String,default:"bottom-right",validator:l=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(l)},offset:{type:Array,validator:l=>l.length===2},expand:Boolean};function be(){const{props:l,proxy:{$q:o}}=X(),r=ne(ue,z);if(r===z)return console.error("QPageSticky needs to be child of QLayout"),z;const n=_(()=>{const d=l.position;return{top:d.indexOf("top")>-1,right:d.indexOf("right")>-1,bottom:d.indexOf("bottom")>-1,left:d.indexOf("left")>-1,vertical:d==="top"||d==="bottom",horizontal:d==="left"||d==="right"}}),u=_(()=>r.header.offset),e=_(()=>r.right.offset),s=_(()=>r.footer.offset),c=_(()=>r.left.offset),m=_(()=>{let d=0,b=0;const h=n.value,B=o.lang.rtl===!0?-1:1;h.top===!0&&u.value!==0?b=`${u.value}px`:h.bottom===!0&&s.value!==0&&(b=`${-s.value}px`),h.left===!0&&c.value!==0?d=`${B*c.value}px`:h.right===!0&&e.value!==0&&(d=`${-B*e.value}px`);const k={transform:`translate(${d}, ${b})`};return l.offset&&(k.margin=`${l.offset[1]}px ${l.offset[0]}px`),h.vertical===!0?(c.value!==0&&(k[o.lang.rtl===!0?"right":"left"]=`${c.value}px`),e.value!==0&&(k[o.lang.rtl===!0?"left":"right"]=`${e.value}px`)):h.horizontal===!0&&(u.value!==0&&(k.top=`${u.value}px`),s.value!==0&&(k.bottom=`${s.value}px`)),k}),w=_(()=>`q-page-sticky row flex-center fixed-${l.position} q-page-sticky--${l.expand===!0?"expand":"shrink"}`);function p(d){const b=U(d.default);return S("div",{class:w.value,style:m.value},l.expand===!0?b:[S("div",b)])}return{$layout:r,getStickyContent:p}}var W=D({name:"QPageSticky",props:ye,setup(l,{slots:o}){const{getStickyContent:r}=be();return()=>r(o)}});const he=V({__name:"ArticleItem",props:{id:{type:Number,required:!0},title:{type:String,required:!0}},setup(l){const o=Y(),r=l,n=v(r.title),u=v(r.id),e=()=>{o.push(`/folder/article/${u.value}`)};return(s,c)=>(i(),f(E,null,{default:a(()=>[Q((i(),f(x,{clickable:"",exact:"",dense:"",onClick:e,class:"q-pa-none"},{default:a(()=>[t(y,{avatar:"",class:"q-pa-none min-w-[32px]"},{default:a(()=>[t($,{name:"article",size:"sm"})]),_:1}),t(y,null,{default:a(()=>[t(C,null,{default:a(()=>[P(F(n.value),1)]),_:1})]),_:1})]),_:1})),[[I]])]),_:1}))}}),ke={class:"row items-center"},xe=V({__name:"FolderList",props:{id:{type:Number,required:!0}},setup(l){const o=Y(),r=l,n=v({});ie(async()=>{n.value=await ge(r.id)});const u=v("keyboard_arrow_right"),e=v(!1);function s(){e.value=!e.value,o.push(`/folder/detail/${n.value.id}`),e.value?u.value="keyboard_arrow_down":u.value="keyboard_arrow_right"}return(c,m)=>{const w=j("FolderList",!0);return i(),f(E,null,{default:a(()=>[Q((i(),f(x,{clickable:"",exact:"",dense:"",onClick:s,class:"q-pa-none"},{default:a(()=>[t(y,{avatar:"",class:"q-pa-none"},{default:a(()=>[ce("div",ke,[t($,{name:u.value,size:"sm"},null,8,["name"]),t($,{name:"folder",size:"sm"})])]),_:1}),t(y,null,{default:a(()=>[t(C,null,{default:a(()=>[P(F(n.value.name),1)]),_:1})]),_:1})]),_:1})),[[I]]),e.value&&n.value.articles.length>0?(i(),f(x,{key:0,class:"q-pa-none q-pl-lg",dense:""},{default:a(()=>[t(y,null,{default:a(()=>[(i(!0),T(O,null,L(n.value.articles,p=>(i(),f(he,{id:p.id,key:p.id,title:p.title},null,8,["id","title"]))),128))]),_:1})]),_:1})):q("",!0),e.value&&n.value.folders.length>0?(i(),f(x,{key:1,class:"q-pa-none q-pl-lg",dense:""},{default:a(()=>[t(y,null,{default:a(()=>[(i(!0),T(O,null,L(n.value.folders,p=>(i(),f(w,{id:p.id,key:p.id},null,8,["id"]))),128))]),_:1})]),_:1})):q("",!0)]),_:1})}}}),we=V({__name:"MdCatalog",props:{catalog:{type:Array,required:!0}},setup(l){const o=l;async function r(n){document.body.classList.remove("q-body--prevent-scroll"),document.body.classList.remove("q-body--force-scrollbar-y");const u=document.getElementById(n.text);u&&u.scrollIntoView({behavior:"smooth"})}return(n,u)=>(i(),f(E,{class:"q-pa-none"},{default:a(()=>[(i(!0),T(O,null,L(o.catalog,e=>Q((i(),f(x,{key:e.text,clickable:"","active-class":"bg-primary text-white",onClick:s=>r(e)},{default:a(()=>[t(y,null,{default:a(()=>[t(C,{class:pe({"pl-0":e.level===1,"pl-4":e.level===2,"pl-8":e.level===3,"pl-12":e.level===4,"pl-16":e.level===5,"pl-20":e.level===6})},{default:a(()=>[P(F(e.text),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["onClick"])),[[I]])),128)),o.catalog.length===0?(i(),f(x,{key:0,class:"text-center"},{default:a(()=>[t($,{name:"hourglass_empty",size:"16px"}),t(C,null,{default:a(()=>[P("\u6682\u65E0\u5927\u7EB2")]),_:1})]),_:1})):q("",!0)]),_:1}))}}),Ee=V({__name:"FolderPage",setup(l){ee();const o=v(200),r=v([200,Math.min(400,window.innerWidth/2)]);window.addEventListener("resize",()=>{r.value=[200,Math.min(400,window.innerWidth/2)]});const n=async c=>{var m;(m=c==null?void 0:c.position)!=null&&m.left&&(c.position.left<r.value[0]?o.value=r.value[0]:c.position.left>r.value[1]?o.value=r.value[1]:o.value=c.position.left)};function u(){s.isDrawerOpen=!s.isDrawerOpen,o.value=s.isDrawerOpen?200:0}const e=v({label:"\u6587\u4EF6",name:"file"});v("chevron_right");const s=te();return(c,m)=>{const w=j("router-view");return i(),f(ve,null,{default:a(()=>[t(me,{class:"bg-blue-grey-2",width:o.value,modelValue:g(s).isDrawerOpen,"onUpdate:modelValue":m[2]||(m[2]=p=>g(s).isDrawerOpen=p),elevated:"",overlay:"",persistent:""},{default:a(()=>[t(H,{modelValue:e.value.name,"onUpdate:modelValue":m[0]||(m[0]=p=>e.value.name=p),class:"bg-blue-grey-2","active-color":"primary","indicator-color":"primary",align:"left","vertical-panes":""},{default:a(()=>[t(M,{name:"file",icon:"folder",label:"\u6587\u4EF6"}),t(M,{name:"catalog",icon:"list",label:"\u5927\u7EB2",disable:g(s).catalog.length===0},null,8,["disable"])]),_:1},8,["modelValue"]),t(ae),t(_e,{modelValue:e.value.name,"onUpdate:modelValue":m[1]||(m[1]=p=>e.value.name=p),class:"bg-blue-grey-2","keep-alive":""},{default:a(()=>[t(R,{name:"file"},{default:a(()=>[t(xe,{id:0})]),_:1}),t(R,{name:"catalog"},{default:a(()=>[t(we,{catalog:g(s).catalog},null,8,["catalog"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["width","modelValue"]),t(W,{class:"z-top",position:"left",offset:[-20,0]},{default:a(()=>[g(s).isDrawerOpen?q("",!0):Q((i(),f(A,{key:0,dense:"",round:"",color:"primary",icon:g(s).isDrawerOpen?"chevron_left":"chevron_right",class:"desktop-only",size:"lg",onClick:u},null,8,["icon"])),[[N,n,void 0,{horizontal:!0,prevent:!0,mouse:!0}]])]),_:1}),t(W,{class:"z-top",position:"left",offset:[o.value-20,0]},{default:a(()=>[g(s).isDrawerOpen?Q((i(),f(A,{key:0,dense:"",round:"",color:"primary",icon:g(s).isDrawerOpen?"chevron_left":"chevron_right",class:"desktop-only",size:"lg",onClick:u},null,8,["icon"])),[[N,n,void 0,{horizontal:!0,prevent:!0,mouse:!0}]]):q("",!0)]),_:1},8,["offset"]),t(w)]),_:1})}}});export{Ee as default};
