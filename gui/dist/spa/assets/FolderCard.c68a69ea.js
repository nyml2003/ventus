import{Q as D,R as k}from"./QBtn.dea77918.js";import{b as r,Q as C,a as i}from"./QItem.be53cf46.js";import{Q as A}from"./QCardSection.39bafb07.js";import{a as V,Q as N}from"./folderStore.53da8e8f.js";import{Q as x}from"./QIcon.2816fa90.js";import{Q as B}from"./QChip.4564fe92.js";import{Q as h}from"./QAvatar.ae9fd2de.js";import{Q as S}from"./QList.5f52d5ab.js";import{Q as P}from"./QCard.77d08939.js";import{Q as R}from"./QPage.9e0bfa57.js";import{g as E}from"./requests.9c957d79.js";import{d as T,ab as j,r as z,W as U,o as q,ac as O,x as o,y as f,z as e,f as t,a0 as I,X as s,Y as l,Z as m,$ as _,F as p,I as y,V as v}from"./index.46c1e340.js";import"./render.c44680c3.js";import"./use-dark.1d5c52f5.js";const M={class:"text-h6 text-weight-bolder"},W={class:"text-h6 text-weight-bolder"},X=["src"],Y={class:"text-h6 text-weight-bolder"},Z={class:"text-caption text-weight-bolder"},G=["src"],H={key:0,class:"flex items-center justify-center"},pe=T({__name:"FolderCard",setup(J){V().resetCatalog();const g=j(),F=z(parseInt(g.params.id)),Q=U(),u=z({});async function $(){var c;u.value.id!==0&&Q.push(`/folder/detail/${(c=u.value.parent)==null?void 0:c.id}`)}async function b(c){Q.push(`/folder/detail/${c}`)}async function w(c){Q.push(`/folder/article/${c}`)}q(async()=>{u.value=await E(F.value)}),O(async()=>{F.value!==parseInt(g.params.id)&&(F.value=parseInt(g.params.id),u.value=await E(F.value))});function L(){return!(u.value.hasOwnProperty("folders")&&u.value.folders.length>0||u.value.hasOwnProperty("articles")&&u.value.articles.length>0)}return(c,ee)=>(o(),f(R,{class:"flex items-start justify-center"},{default:e(()=>[t(P,{class:"q-ma-md w-[700px] rounded-3xl min-h-[95vh]"},{default:e(()=>[t(A,{class:"flex items-center justify-start"},{default:e(()=>{var a;return[u.value.parent?(o(),f(D,{key:0,label:(a=u.value.parent)==null?void 0:a.name,class:"q-mr-md",color:"primary",flat:"",icon:"arrow_back",onClick:$},null,8,["label"])):I("",!0),t(r,{class:"text-h6"},{default:e(()=>[s(l(u.value.name),1)]),_:1})]}),_:1}),t(N),t(A,null,{default:e(()=>[t(S,{class:"desktop-only"},{default:e(()=>[(o(!0),m(p,null,_(u.value.folders,a=>y((o(),f(C,{key:a.id,clickable:"",onClick:n=>b(a.id)},{default:e(()=>[t(i,{avatar:""},{default:e(()=>[t(x,{name:"folder",size:"xl"})]),_:1}),t(i,null,{default:e(()=>[t(r,null,{default:e(()=>[v("div",M,l(a.name),1)]),_:2},1024),t(r,{caption:""},{default:e(()=>[s(l(a.articleCount)+" \u7BC7\u6587\u7AE0, "+l(a.folderCount)+" \u4E2A\u5B50\u6587\u4EF6\u5939 ",1)]),_:2},1024)]),_:2},1024),t(i,{side:"",top:""},{default:e(()=>[t(r,{caption:""},{default:e(()=>[s(" \u66F4\u65B0\u65F6\u95F4\uFF1A "+l(new Date(a.updateTime).toLocaleString()),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[k]])),128)),(o(!0),m(p,null,_(u.value.articles,a=>y((o(),f(C,{key:a.id,clickable:"",onClick:n=>w(a.id)},{default:e(()=>[t(i,{avatar:""},{default:e(()=>[t(x,{name:"article",size:"xl"})]),_:1}),t(i,null,{default:e(()=>[t(r,null,{default:e(()=>[v("div",W,[s(l(a.title),1),(o(!0),m(p,null,_(a.tags,(n,d)=>(o(),f(B,{key:d,label:n.name},null,8,["label"]))),128))])]),_:2},1024),t(r,{caption:"",lines:"2"},{default:e(()=>[s(l(a.brief),1)]),_:2},1024)]),_:2},1024),t(i,{side:"",top:""},{default:e(()=>[t(r,{caption:""},{default:e(()=>{var n;return[s(" \u4F5C\u8005\uFF1A "),t(h,{size:"sm"},{default:e(()=>{var d;return[v("img",{src:(d=a.author)==null?void 0:d.avatarUrl},null,8,X)]}),_:2},1024),s(" "+l((n=a.author)==null?void 0:n.name),1)]}),_:2},1024),t(r,{caption:""},{default:e(()=>[s(" \u66F4\u65B0\u65F6\u95F4\uFF1A "+l(new Date(a.updateTime).toLocaleString()),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[k]])),128))]),_:1}),t(S,{class:"mobile-only"},{default:e(()=>[(o(!0),m(p,null,_(u.value.folders,a=>y((o(),f(C,{key:a.id,clickable:"",onClick:n=>b(a.id)},{default:e(()=>[t(i,{avatar:""},{default:e(()=>[t(x,{name:"folder",size:"xl"})]),_:1}),t(i,null,{default:e(()=>[t(r,null,{default:e(()=>[v("div",Y,l(a.name),1)]),_:2},1024),t(r,{caption:""},{default:e(()=>[s(l(a.articleCount)+" \u7BC7\u6587\u7AE0, "+l(a.folderCount)+" \u4E2A\u5B50\u6587\u4EF6\u5939 ",1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[k]])),128)),(o(!0),m(p,null,_(u.value.articles,a=>y((o(),f(C,{key:a.id,clickable:"",onClick:n=>w(a.id)},{default:e(()=>[t(i,{avatar:""},{default:e(()=>[t(x,{name:"article",size:"xl"})]),_:1}),t(i,null,{default:e(()=>[t(r,null,{default:e(()=>[v("div",Z,[s(l(a.title),1),(o(!0),m(p,null,_(a.tags,(n,d)=>(o(),f(B,{key:d,label:n.name,size:"sm"},null,8,["label"]))),128))])]),_:2},1024),t(r,{caption:"",lines:"2"},{default:e(()=>[s(l(a.brief),1)]),_:2},1024),t(r,{caption:""},{default:e(()=>{var n;return[s(" \u4F5C\u8005\uFF1A "),t(h,{size:"sm"},{default:e(()=>{var d;return[v("img",{src:(d=a.author)==null?void 0:d.avatarUrl},null,8,G)]}),_:2},1024),s(" "+l((n=a.author)==null?void 0:n.name),1)]}),_:2},1024),t(r,{caption:""},{default:e(()=>[s(" \u66F4\u65B0\u65F6\u95F4\uFF1A "+l(new Date(a.updateTime).toLocaleString()),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[k]])),128))]),_:1}),L()?(o(),m("div",H,[t(r,{class:"text-h6"},{default:e(()=>[s("\u7A7A\u7A7A\u5982\u4E5F")]),_:1})])):I("",!0)]),_:1})]),_:1})]),_:1}))}});export{pe as default};
